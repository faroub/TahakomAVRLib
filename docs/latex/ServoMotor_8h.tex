\hypertarget{ServoMotor_8h}{}\doxysection{Servo\+Motor.\+h File Reference}
\label{ServoMotor_8h}\index{ServoMotor.h@{ServoMotor.h}}


Header file of the Servo\+Motor class.  


{\ttfamily \#include \char`\"{}ha\+\_\+base.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Pin.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Timer\+Counter1.\+h\char`\"{}}\newline
Include dependency graph for Servo\+Motor.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ServoMotor_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=165pt]{ServoMotor_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classcomponent_1_1ServoMotor}{component\+::\+Servo\+Motor}}
\end{DoxyCompactItemize}
\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespacecomponent}{component}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header file of the Servo\+Motor class. 

Header file of the Stepper\+Motor class.

Usage example (separate)\+: \#include \char`\"{}\+M\+C\+U.\+h\char`\"{} \#include \char`\"{}\+Servo\+Motor.\+h\char`\"{} \#include \char`\"{}\+Timer\+Counter1.\+h\char`\"{}

\#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+N\+U\+M\+B\+ER 1 \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+C\+Y\+C\+LE 30000 // pulse cycle \mbox{[}us\mbox{]} \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+IN 500// pulse width min \mbox{[}us\mbox{]} \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+ID 1520 // pulse width mid \mbox{[}us\mbox{]} \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+AX 3000 // pulse width max \mbox{[}us\mbox{]}

int \mbox{\hyperlink{main_8cpp_a840291bc02cba5474a4cb46a9b9566fe}{main(void)}} \{

Init initialize M\+CU \mbox{\hyperlink{classcore_1_1MCU_aa6fd8e982755601a06ce54147b83d162}{core\+::\+M\+C\+U\+::init()}};

instantiate the Timer\+Counter0 object \mbox{\hyperlink{classcore_1_1TimerCounter1}{core\+::\+Timer\+Counter1}} \&my\+Timer\+Counter1 = \mbox{\hyperlink{classcore_1_1TimerCounter1_ae23c48d6837365686e205a6feea0e0f1}{core\+::\+Timer\+Counter1\+::get\+Instance()}}; my\+Timer\+Counter1.\+select\+Clock\+Source(core\+::clock\+Source\+::\+P\+S\+\_\+8); my\+Timer\+Counter1.\+select\+Operation\+Mode(core\+::operation\+Mode\+::fast\+\_\+\+P\+W\+M\+\_\+\+I\+C\+R); my\+Timer\+Counter1.\+select\+Compare\+Output\+Mode(core\+::channel\+::\+A, core\+::compare\+Output\+Mode\+::clear);

instantiate the Buzzer object \mbox{\hyperlink{classcomponent_1_1ServoMotor}{component\+::\+Servo\+Motor}} my\+Servo\+Motor(\mbox{\hyperlink{classio_1_1Pin}{io\+::\+Pin(\+S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+N\+U\+M\+B\+E\+R,io\+::\+Port\+B)}}, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+C\+Y\+C\+LE, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+IN, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+ID, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+AX);

my\+Timer\+Counter1.\+set\+Input\+Capture\+Register(my\+Servo\+Motor.\+compute\+Pulse\+Cycle\+Count(my\+Timer\+Counter1.\+get\+Clock\+Prescaler())); my\+Timer\+Counter1.\+set\+Output\+Compare\+Register(\mbox{\hyperlink{namespacecore_a1bbe9e05be92da10bbb8ef7805df1419a7fc56270e7a70fa81a5935b72eacbe29}{core\+::channel\+::A}}, my\+Servo\+Motor.\+compute\+Rotation\+Angle\+Count(0,my\+Timer\+Counter1.\+get\+Clock\+Prescaler())); my\+Timer\+Counter1.\+start(); \+\_\+delay\+\_\+ms(2000); my\+Timer\+Counter1.\+set\+Output\+Compare\+Register(\mbox{\hyperlink{namespacecore_a1bbe9e05be92da10bbb8ef7805df1419a7fc56270e7a70fa81a5935b72eacbe29}{core\+::channel\+::A}}, my\+Servo\+Motor.\+compute\+Rotation\+Angle\+Count(45,my\+Timer\+Counter1.\+get\+Clock\+Prescaler())); my\+Timer\+Counter1.\+start(); \+\_\+delay\+\_\+ms(2000); my\+Timer\+Counter1.\+set\+Output\+Compare\+Register(\mbox{\hyperlink{namespacecore_a1bbe9e05be92da10bbb8ef7805df1419a7fc56270e7a70fa81a5935b72eacbe29}{core\+::channel\+::A}}, my\+Servo\+Motor.\+compute\+Rotation\+Angle\+Count(90,my\+Timer\+Counter1.\+get\+Clock\+Prescaler())); my\+Timer\+Counter1.\+start(); \+\_\+delay\+\_\+ms(2000); my\+Timer\+Counter1.\+set\+Output\+Compare\+Register(\mbox{\hyperlink{namespacecore_a1bbe9e05be92da10bbb8ef7805df1419a7fc56270e7a70fa81a5935b72eacbe29}{core\+::channel\+::A}}, my\+Servo\+Motor.\+compute\+Rotation\+Angle\+Count(135,my\+Timer\+Counter1.\+get\+Clock\+Prescaler())); my\+Timer\+Counter1.\+start(); \+\_\+delay\+\_\+ms(2000); my\+Timer\+Counter1.\+set\+Output\+Compare\+Register(\mbox{\hyperlink{namespacecore_a1bbe9e05be92da10bbb8ef7805df1419a7fc56270e7a70fa81a5935b72eacbe29}{core\+::channel\+::A}}, my\+Servo\+Motor.\+compute\+Rotation\+Angle\+Count(180,my\+Timer\+Counter1.\+get\+Clock\+Prescaler())); my\+Timer\+Counter1.\+start(); \+\_\+delay\+\_\+ms(2000); my\+Timer\+Counter1.\+set\+Output\+Compare\+Register(\mbox{\hyperlink{namespacecore_a1bbe9e05be92da10bbb8ef7805df1419a7fc56270e7a70fa81a5935b72eacbe29}{core\+::channel\+::A}}, my\+Servo\+Motor.\+compute\+Rotation\+Angle\+Count(0,my\+Timer\+Counter1.\+get\+Clock\+Prescaler())); my\+Timer\+Counter1.\+start(); \+\_\+delay\+\_\+ms(2000);

Mainloop while (1) \{

\} return 0; \} Usage example (Timer\+Counter1)\+: \#include \char`\"{}\+M\+C\+U.\+h\char`\"{} \#include \char`\"{}\+Servo\+Motor.\+h\char`\"{} \#include \char`\"{}\+Timer\+Counter1.\+h\char`\"{}

\#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+N\+U\+M\+B\+ER 1 \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+C\+Y\+C\+LE 30000 // pulse cycle \mbox{[}us\mbox{]} \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+IN 500// pulse width min \mbox{[}us\mbox{]} \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+ID 1520 // pulse width mid \mbox{[}us\mbox{]} \#define S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+AX 3000 // pulse width max \mbox{[}us\mbox{]}

int \mbox{\hyperlink{main_8cpp_a840291bc02cba5474a4cb46a9b9566fe}{main(void)}} \{

Init initialize M\+CU \mbox{\hyperlink{classcore_1_1MCU_aa6fd8e982755601a06ce54147b83d162}{core\+::\+M\+C\+U\+::init()}};

instantiate the Timer\+Counter1 object \mbox{\hyperlink{classcore_1_1TimerCounter1}{core\+::\+Timer\+Counter1}} \&my\+Timer\+Counter1 = \mbox{\hyperlink{classcore_1_1TimerCounter1_ae23c48d6837365686e205a6feea0e0f1}{core\+::\+Timer\+Counter1\+::get\+Instance()}}; my\+Timer\+Counter1.\+select\+Clock\+Source(core\+::clock\+Source\+::\+P\+S\+\_\+8);

instantiate the Buzzer object \mbox{\hyperlink{classcomponent_1_1ServoMotor}{component\+::\+Servo\+Motor}} my\+Servo\+Motor(\mbox{\hyperlink{classio_1_1Pin}{io\+::\+Pin(\+S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+N\+U\+M\+B\+E\+R,io\+::\+Port\+B)}}, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+C\+Y\+C\+LE, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+IN, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+ID, S\+E\+R\+V\+O\+M\+O\+T\+O\+R\+\_\+\+P\+U\+L\+S\+E\+\_\+\+W\+I\+D\+T\+H\+\_\+\+M\+AX);

my\+Servo\+Motor.\+connect(my\+Timer\+Counter1);

my\+Servo\+Motor.\+rotate(my\+Timer\+Counter1,0); \+\_\+delay\+\_\+ms(2000); my\+Servo\+Motor.\+rotate(my\+Timer\+Counter1,45); \+\_\+delay\+\_\+ms(2000); my\+Servo\+Motor.\+rotate(my\+Timer\+Counter1,90); \+\_\+delay\+\_\+ms(2000); my\+Servo\+Motor.\+rotate(my\+Timer\+Counter1,135); \+\_\+delay\+\_\+ms(2000); my\+Servo\+Motor.\+rotate(my\+Timer\+Counter1,180); \+\_\+delay\+\_\+ms(2000); my\+Servo\+Motor.\+rotate(my\+Timer\+Counter1,0); \+\_\+delay\+\_\+ms(2000);

my\+Servo\+Motor.\+disconnect(my\+Timer\+Counter1);

Mainloop while (1) \{

\begin{DoxyVerb}}
return 0;
\end{DoxyVerb}
 \}

class to control a servo motor \begin{DoxyAuthor}{Author}
Farid Oubbati (\href{https://github.com/faroub}{\texttt{ https\+://github.\+com/faroub}}) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
March 2020
\end{DoxyDate}
The Stepper\+Motor class is implemented and tested for the 28B\+Y\+J-\/48 Stepper Motor Usage example (basic)\+:

\#include \char`\"{}\+Stepper\+Motor.\+h\char`\"{}

\#define Stepper\+Motor\+\_\+\+Pin\+\_\+1 0 \#define Stepper\+Motor\+\_\+\+Pin\+\_\+2 1 \#define Stepper\+Motor\+\_\+\+Pin\+\_\+3 2 \#define Stepper\+Motor\+\_\+\+Pin\+\_\+4 3

\#define S\+T\+E\+P\+\_\+\+A\+N\+G\+L\+E\+\_\+\+F\+U\+L\+L\+\_\+\+S\+T\+EP 0.\+176 \#define S\+T\+E\+P\+\_\+\+A\+N\+G\+L\+E\+\_\+\+H\+A\+L\+F\+\_\+\+S\+T\+EP 0.\+0879

int \mbox{\hyperlink{main_8cpp_a840291bc02cba5474a4cb46a9b9566fe}{main(void)}} \{

instantiate the Stepper\+Motor object \mbox{\hyperlink{classcomponent_1_1StepperMotor}{component\+::\+Stepper\+Motor}} my\+Stepper\+Motor(\mbox{\hyperlink{namespacecomponent_af0a0265c4acf2fdab273cd03d0a2b52ba8b8f0c3e7c9da9a6fc85fac970b41a7b}{component\+::mode\+::half\+Step}}, \mbox{\hyperlink{classio_1_1Pin}{io\+::\+Pin(\+Stepper\+Motor\+\_\+\+Pin\+\_\+1,io\+::\+Port\+B)}}, \mbox{\hyperlink{classio_1_1Pin}{io\+::\+Pin(\+Stepper\+Motor\+\_\+\+Pin\+\_\+2,io\+::\+Port\+B)}}, \mbox{\hyperlink{classio_1_1Pin}{io\+::\+Pin(\+Stepper\+Motor\+\_\+\+Pin\+\_\+3,io\+::\+Port\+B)}}, \mbox{\hyperlink{classio_1_1Pin}{io\+::\+Pin(\+Stepper\+Motor\+\_\+\+Pin\+\_\+4,io\+::\+Port\+B)}});

int16\+\_\+t l\+\_\+angle = -\/180; int16\+\_\+t l\+\_\+step = static\+\_\+cast$<$int16\+\_\+t$>$(l\+\_\+angle / S\+T\+E\+P\+\_\+\+A\+N\+G\+L\+E\+\_\+\+H\+A\+L\+F\+\_\+\+S\+T\+EP);

set speed \mbox{[}steps/s\mbox{]} full step\+: max speed\+: 500p/s half step\+: max speed\+: 1000p/s

set speed \mbox{[}°/s\mbox{]} full step\+: max speed\+: 40°/s half step\+: max speed\+: 80°/s

Mainloop while (1) \{ \begin{DoxyVerb} while (!myStepperMotor.goalReached())
 {
\end{DoxyVerb}
 set motor steps my\+Stepper\+Motor.\+step(l\+\_\+step,1000); my\+Stepper\+Motor.\+step(l\+\_\+step,80,\+S\+T\+E\+P\+\_\+\+A\+N\+G\+L\+E\+\_\+\+H\+A\+L\+F\+\_\+\+S\+T\+E\+P); \begin{DoxyVerb}    }
\end{DoxyVerb}
 \} return 0; \}

class to control a servo motor \begin{DoxyAuthor}{Author}
Farid Oubbati (\href{https://github.com/faroub}{\texttt{ https\+://github.\+com/faroub}}) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
March 2020 
\end{DoxyDate}


Definition in file \mbox{\hyperlink{ServoMotor_8h_source}{Servo\+Motor.\+h}}.

